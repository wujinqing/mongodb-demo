## 方法说明

### db.collection.group() 分组

#### 定义：
> db.collection.group({ key, reduce, initial \[, keyf] \[, cond] \[, finalize] })

#### 注意
被废弃了
> Mongodb 3.4 deprecates the db.collection.group() method. Use db.collection.aggregate() with the $group stage or db.collection.mapReduce() instead.

group 无法操作分片，mapReduce可以。


|参数|说明|示例|
|---|---|---|
|key|分组字段|key: {count: true,name: true}|
|initial|初始化聚合结果，分组后对每一组进行聚合操作时的初始值， 在每一个组里面是共享的，不同组里面是隔离的|initial: {totalCount: 0}|
|reduce|是个函数，会接收两个参数，一个是current表示当前文档，另一个是aggregator表示当前文档所在的组。对于每一组中的每一条记录都会执行该函数，current表示当前记录，aggregator聚合器它的初始值是initial里面的对象，每个分组的aggregator都是独立的|reduce: function(current, aggregator){aggregator.totalCount++;}}|
|cond|查询条件，先过滤掉不需要分组的数据|cond:{count: {$gt: 1}}|
|finalize|完成器，它是在reduce之后执行的|示例|
|keyf|与key不同，key是文档中已有的字段，keyf是通过计算得来的|示例|





#### 示例

> db.mygroup.group({key: {count: true}, initial: {totalCount: 0}, reduce: function(current, aggregator){aggregator.totalCount++;}});
